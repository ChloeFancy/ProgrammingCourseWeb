(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[9],{YkAm:function(e,t,n){e.exports={"ant-alert":"ant-alert","ant-alert-no-icon":"ant-alert-no-icon","ant-alert-closable":"ant-alert-closable","ant-alert-icon":"ant-alert-icon","ant-alert-description":"ant-alert-description","ant-alert-success":"ant-alert-success","ant-alert-info":"ant-alert-info","ant-alert-warning":"ant-alert-warning","ant-alert-error":"ant-alert-error","ant-alert-close-icon":"ant-alert-close-icon","anticon-close":"anticon-close","ant-alert-close-text":"ant-alert-close-text","ant-alert-with-description":"ant-alert-with-description","ant-alert-message":"ant-alert-message","ant-alert-close":"ant-alert-close","ant-alert-slide-up-leave":"ant-alert-slide-up-leave",antAlertSlideUpOut:"antAlertSlideUpOut","ant-alert-banner":"ant-alert-banner",antAlertSlideUpIn:"antAlertSlideUpIn"}},b9pH:function(e,t,n){"use strict";n.r(t);n("cIOH"),n("YkAm");var a=n("q1tI"),r=n.n(a),o=n("i8i4"),l=n("MFj2"),c=n("CtXQ"),i=n("TSYQ"),s=n.n(i),u=n("wEI+"),d=n("RqAY");function p(e){return p="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function m(){return m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},m.apply(this,arguments)}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function b(e,t,n){return t&&h(e.prototype,t),n&&h(e,n),e}function y(e,t){return!t||"object"!==p(t)&&"function"!==typeof t?E(e):t}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&I(e,t)}function I(e,t){return I=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},I(e,t)}function x(){}var w,k,C,O=function(e){function t(){var e;return g(this,t),e=y(this,v(t).apply(this,arguments)),e.state={closing:!0,closed:!1},e.handleClose=function(t){t.preventDefault();var n=o["findDOMNode"](E(e));n.style.height="".concat(n.offsetHeight,"px"),n.style.height="".concat(n.offsetHeight,"px"),e.setState({closing:!1}),(e.props.onClose||x)(t)},e.animationEnd=function(){e.setState({closed:!0,closing:!0}),(e.props.afterClose||x)()},e.renderAlert=function(t){var n,r,o=t.getPrefixCls,i=e.props,u=i.description,p=i.prefixCls,g=i.message,h=i.closeText,b=i.banner,y=i.className,v=void 0===y?"":y,E=i.style,S=i.icon,I=e.props,x=I.closable,w=I.type,k=I.showIcon,C=I.iconType,O=o("alert",p);k=!(!b||void 0!==k)||k,w=b&&void 0===w?"warning":w||"info";var j="filled";if(!C){switch(w){case"success":C="check-circle";break;case"info":C="info-circle";break;case"error":C="close-circle";break;case"warning":C="exclamation-circle";break;default:C="default"}u&&(j="outlined")}h&&(x=!0);var N=s()(O,"".concat(O,"-").concat(w),(n={},f(n,"".concat(O,"-close"),!e.state.closing),f(n,"".concat(O,"-with-description"),!!u),f(n,"".concat(O,"-no-icon"),!k),f(n,"".concat(O,"-banner"),!!b),f(n,"".concat(O,"-closable"),x),n),v),M=x?a["createElement"]("a",{onClick:e.handleClose,className:"".concat(O,"-close-icon")},h||a["createElement"](c["a"],{type:"close"})):null,T=Object(d["a"])(e.props),D=S&&(a["isValidElement"](S)?a["cloneElement"](S,{className:s()((r={},f(r,S.props.className,S.props.className),f(r,"".concat(O,"-icon"),!0),r))}):a["createElement"]("span",{className:"".concat(O,"-icon")},S))||a["createElement"](c["a"],{className:"".concat(O,"-icon"),type:C,theme:j});return e.state.closed?null:a["createElement"](l["a"],{component:"",showProp:"data-show",transitionName:"".concat(O,"-slide-up"),onEnd:e.animationEnd},a["createElement"]("div",m({"data-show":e.state.closing,className:N,style:E},T),k?D:null,a["createElement"]("span",{className:"".concat(O,"-message")},g),a["createElement"]("span",{className:"".concat(O,"-description")},u),M))},e}return S(t,e),b(t,[{key:"render",value:function(){return a["createElement"](u["a"],null,this.renderAlert)}}]),t}(a["Component"]),j=(n("T2oS"),n("W9HT")),N=(n("+L6B"),n("2/Rp")),M=(n("g9YV"),n("wCAj")),T=(n("+BJd"),n("mr32")),D=n("d6i3"),P=n.n(D),R=(n("miYZ"),n("tsqr")),A=n("1l/V"),Y=n.n(A),H=n("eHn4"),_=n.n(H),B=n("2Taf"),z=n.n(B),L=n("vZ4D"),U=n.n(L),q=n("l4Ni"),J=n.n(q),V=n("ujKo"),Z=n.n(V),F=n("MhPg"),K=n.n(F),Q=(n("7Kak"),n("9yH6")),G=(n("Znn+"),n("ZTPi")),W=n("MuoO"),X=n("QjGI"),$=n.n(X),ee=(n("mki7"),n("enqM"),n("p77/"),n("11Mh")),te=n("veNr"),ne=n("XIgf"),ae=n.n(ne);n.d(t,"default",function(){return le});var re=G["a"].TabPane,oe=Q["a"].Group,le=(w=Object(W["connect"])(function(e){var t=e.problemDetail;return{studentSubmitInfo:t.studentSubmitInfo,problemInfo:t.problemInfo,loading:t.loading,languageOptions:t.languageOptions,codeSubmitting:t.codeSubmitting,judgeResult:t.judgeResult,judgeResultsMap:t.judgeResultsMap,submitRecords:t.submitRecords,options:t.options}}),w((C=function(e){function t(){var e,n;z()(this,t);for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];return n=J()(this,(e=Z()(t)).call.apply(e,[this].concat(l))),n.handleStudentSubmitInfoChange=function(e){return function(t){var a=n.props.dispatch;a({type:"problemDetail/changeStudentSubmitInfo",payload:_()({},e,t.target.value)})}},n.handleCodeChange=function(e){var t=e.getValue(),a=n.props.dispatch;a({type:"problemDetail/changeStudentSubmitInfo",payload:{code:t}})},n.checkBeforeSubmit=function(){var e=n.props.studentSubmitInfo,t=e.language,a=e.code,r="";return t?a||(r="\u8bf7\u586b\u5199\u4ee3\u7801"):r="\u8bf7\u9009\u62e9\u8bed\u8a00",r},n.handleSubmitCode=Y()(P.a.mark(function e(){var t,a;return P.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:t=n.props.dispatch,a=n.checkBeforeSubmit(),a?R["a"].error(a):t({type:"problemDetail/submitCodeByStudent"});case 3:case"end":return e.stop()}},e)})),n.handleShowSizeChange=function(e,t){var a=n.props,r=a.dispatch,o=a.submitRecords.pageSize,l=a.match.params.id;r({type:"problemDetail/setSubmitRecords",payload:{pageIndex:e,pageSize:t||o}}),r({type:"problemDetail/getSubmitRecords",payload:{id:l}})},n.getColumns=function(){var e=n.props.languageOptions;return[{title:"#",dataIndex:ee["c"].id.dataIndex,key:ee["c"].id.dataIndex},{title:ee["c"].submitTime.text,dataIndex:ee["c"].submitTime.dataIndex,key:ee["c"].submitTime.dataIndex,render:Object(te["c"])("YYYY-MM-DD HH:MM:SS")},{title:ee["c"].language.text,dataIndex:ee["c"].language.dataIndex,key:ee["c"].language.dataIndex,width:"16%",render:function(t){return(e.find(function(e){var n=e.value;return n===t})||{}).key}},{title:ee["c"].runningTime.text,dataIndex:ee["c"].runningTime.dataIndex,key:ee["c"].runningTime.dataIndex,width:"20%"},{title:ee["c"].isPass.text,dataIndex:ee["c"].isPass.dataIndex,key:ee["c"].isPass.dataIndex,width:"10%",render:function(e){return e?"\u901a\u8fc7":"\u672a\u901a\u8fc7"}}]},n.renderProblemBasicInfo=function(){var e=n.props,t=e.problemInfo,a=e.options;return r.a.createElement("div",{className:ae.a.problemBasicInfo},r.a.createElement("h1",{className:ae.a.title},t[ee["a"].title.dataIndex]),r.a.createElement("div",{className:ae.a.info},r.a.createElement("span",null,"\u53d1\u5e03\u65f6\u95f4:",Object(te["c"])("YYYY-MM-DD HH:MM:SS")(t[ee["a"].createTime.dataIndex])),r.a.createElement("span",null,"\u6700\u540e\u66f4\u65b0: \u6682\u65e0"),r.a.createElement("span",null,"\u65f6\u95f4\u9650\u5236(ms):",t[ee["a"].judgeLimitTime.dataIndex]),r.a.createElement("span",null,"\u5185\u5b58\u9650\u5236(MB):",t[ee["a"].judgeLimitMem.dataIndex])),r.a.createElement("div",{className:ae.a.info},r.a.createElement("span",null,"\u77e5\u8bc6\u70b9:",Array.isArray(t[ee["a"].tags.dataIndex])&&t[ee["a"].tags.dataIndex].map(function(e){return r.a.createElement(T["a"],null,(a.tags.find(function(t){var n=t.value;return n===e})||{}).key)}))))},n.renderSubmitInfo=function(){var e=n.props.submitRecords,t=e.dataSource,o=e.total,l=e.pageIndex,c=e.pageSize;return r.a.createElement(a["Fragment"],null,n.renderProblemBasicInfo(),r.a.createElement(M["a"],{columns:n.getColumns(),dataSource:t,pagination:{total:o,pageSize:c,current:l,showSizeChanger:!0,showTotal:function(e){return"\u5171 ".concat(e," \u6761")},onShowSizeChange:n.handleShowSizeChange,onChange:n.handleShowSizeChange}}))},n.renderProblemDetail=function(){var e=n.props,t=e.problemInfo,o=e.studentSubmitInfo,l=o.language,c=o.code,i=e.languageOptions,s=e.codeSubmitting,u=e.judgeResult,d=e.judgeResultsMap;return r.a.createElement(a["Fragment"],null,n.renderProblemBasicInfo(),r.a.createElement("div",{className:ae.a.detailWrapper},r.a.createElement("h5",null,"\u63cf\u8ff0"),r.a.createElement("div",{dangerouslySetInnerHTML:{__html:t[ee["a"].description.dataIndex]}}),r.a.createElement("h5",null,"\u8f93\u5165"),r.a.createElement("div",null,t[ee["a"].in.dataIndex]),r.a.createElement("h5",null,"\u8f93\u51fa"),r.a.createElement("div",null,t[ee["a"].out.dataIndex]),t[ee["a"].inOutExamples.dataIndex]&&t[ee["a"].inOutExamples.dataIndex].map(function(e,t){var n=e.input,a=e.output;return r.a.createElement("div",{key:t},r.a.createElement("h5",null,"\u6837\u4f8b\u8f93\u5165",t+1),r.a.createElement("div",{className:ae.a.example},n),r.a.createElement("h5",null,"\u6837\u4f8b\u8f93\u51fa",t+1),r.a.createElement("div",{className:ae.a.example},a))}),r.a.createElement("h5",null,"\u63d0\u793a"),r.a.createElement("div",{dangerouslySetInnerHTML:{__html:t[ee["a"].hint.dataIndex]}}),r.a.createElement("h5",null,"\u9009\u62e9\u8bed\u8a00"),r.a.createElement("div",null,r.a.createElement(oe,{onChange:n.handleStudentSubmitInfoChange("language"),value:l},i.map(function(e){var t=e.key,n=e.value;return r.a.createElement(Q["a"],{key:n,value:n},t)}))),r.a.createElement("h5",null,"\u63d0\u4ea4\u4ee3\u7801"),r.a.createElement("div",{className:ae.a["code-editor-wrapper"]},r.a.createElement($.a,{value:c,options:{mode:"c++",lineNumbers:!0},onChanges:n.handleCodeChange})),r.a.createElement("div",null,r.a.createElement(N["a"],{type:"primary",onClick:n.handleSubmitCode},"\u63d0\u4ea4\u4ee3\u7801"),"\xa0 \xa0",s&&r.a.createElement(j["a"],null)),r.a.createElement("br",null),d&&d[u]&&r.a.createElement(O,{showIcon:!0,message:d[u],type:u?"error":"success"})))},n}return K()(t,e),U()(t,[{key:"componentDidMount",value:function(){var e=Y()(P.a.mark(function e(){var t,n,a;return P.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=this.props,n=t.match.params.id,a=t.dispatch,e.next=3,Promise.all([a({type:"problemDetail/getLanguageOptions"}),a({type:"problemDetail/getJudgeResultsMap"}),a({type:"problemDetail/getSubmitRecords",payload:{id:n}}),a({type:"problemDetail/getInfo",payload:{id:n,mode:ee["b"].STUDENT}})]);case 3:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"render",value:function(){var e=this.props.loading;return r.a.createElement(j["a"],{spinning:e},r.a.createElement(G["a"],{defaultActiveKey:"1"},r.a.createElement(re,{tab:"\u9898\u76ee",key:"1"},this.renderProblemDetail()),r.a.createElement(re,{tab:"\u6211\u7684\u63d0\u4ea4",key:"2"},this.renderSubmitInfo())))}}]),t}(a["Component"]),k=C))||k)}}]);